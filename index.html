<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>文件上傳/TD超寬處理</title>
  <meta name="generator" content="editplus" />
  <meta name="author" content="" />
  <meta name="keywords" content="" />
  <meta name="description" content="" />
  <style>
	  /*使用GitHub修改內容*/
	  body{
	  	margin:0;
		padding:0;
		text-float:left;
	  }
	  /*-------------------------------*/

td{
text-overflow:ellipsis;//或clip
white-space:nowrap;
overflow:hidden;
width:**px;
}
table{
table-layout:fixed;
} 
td:hover
{
text-overflow:inherit;
overflow:visible;
} 

  </style>
 </head>

 <body>
  <table width="10%" border="1" >
	<tr>
		<td width="30px">
			ASD
		</td>
		<td width="90%">
			FYADUAHFIUAHAFBJIDGGGDBJHGGJDFJDSHUSAHGUADIUHUISFUSHSFHUIHDUSIDSUISUFSUIHUSHUSDDSHUISHDUSHD
		</td>
	</tr>
	
  </table>
  <br/><br/><br/>
  
  <div class="lcell span6">
                        <div class="lrow">
                            <h4>上传按钮 file</h4>
                            <div class="lcell span1" style="line-height:35px;">附件：</div>
                            <div class="lcell span5">
                                <span class="upload">
                                    <input type="button" class="upload-btn" value="浏览文件" />
                                    <span class="upload-tip"></span>
                                    <input type="file" class="upload-input-file" />
                                </span>
                            </div>                            
                            <div class="pc-line"><h4>带文本框</h4></div>   
                            <div class="lcell span1" style="line-height:35px;">附件：</div>                         
                            <div class="lcell span5">
                                <span class="upload">
                                    <input type="text" class="upload-url" />
                                    <input type="button" class="upload-btn" value="浏览文件" />
                                    <input type="file" class="upload-input-file" />
                                </span>                                
                            </div>  
                        </div>                        
                    </div>
  
  <style>
	.upload{position:relative; display:inline-block; height:33px;line-height:33px; overflow:hidden;vertical-align:middle; cursor:pointer;}
.upload .upload-input-file{position:absolute; right:0; top:0; font-size:100px; opacity:0; filter:alpha(opacity=0);cursor:pointer;}
.upload .upload-btn{outline:none;border:0; padding:7px 10px;color:#fff;background:#1c84c6;cursor:pointer; margin:3px; border-radius:3px;}
.upload .upload-url { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; border-radius:2px;
    border: solid 1px #ddd; width: 200px; height:30px;-webkit-line-height: 1;line-height: 30px\9;-ms-line-height: 30px; text-indent:3px;}
.upload .upload-tip {display:none; background-color:#1c84c6; padding:2px 10px; color:#fefefe; font-size:12px !important;border-radius:3px;}

  </style>
  <script>
	$(".upload .upload-input-file").change(function () {        
        if ($(this).parent().html().indexOf("class=\"upload-url\"") != -1) {
            var fileUrl = $(this).val();
            $(this).parent().children(".upload-url").val(fileUrl);
        }
        else {
            var fileUrl = $(this).val();
            var urlArr = fileUrl.split("\\");
            var getName = urlArr[urlArr.length - 1];//截取路径并获取文件的名字 
            $(this).parent().children(".upload-tip").text(getName).fadeIn("slow");
            //$(this).parent().children(".upload-btn").val(getName);//按钮上变成文件名称
            timeout = setTimeout(function () {                
                $(".upload-tip").fadeOut("slow");                
            }, 5000);
        }
    });
  </script>


<br/><br/></br>

<div class="sp-page-box" style="margin-top:50px;">                         
                        <div class="sp-page-column span6">
                            <h4>图片上传</h4>
                            <br />
                            <div class="sp-page-column span1" style="line-height: 35px;">照片：</div>
                            <div class="sp-page-column span5">
                                <span class="sp-upload">
                                    <img class="sp-upload-photo" data-url="" alt="" style="width: 200px; height: 100px;" />
                                    <input type="file" id="btnfile" class="sp-upload-img" />
                                </span>
                            </div>
                        </div>
                    </div>

					<style>
						.sp-upload{position:relative; display:inline-block; min-height:33px;overflow:hidden;vertical-align:middle; cursor:pointer;}

.sp-upload-img{position:absolute; right:0; top:0; font-size:100px; opacity:0; filter:alpha(opacity=0);cursor:pointer; width:100%;height:100%;}
.sp-upload-photo{float:left; outline:none; width:82px;height:82px;background:url('./icons/addPhotocenter.png') center center no-repeat #fff;border-radius:3px; cursor:pointer;}
					</style>
					<script>
						$(".sp-upload .sp-upload-img").change(function () {
            var file = this.files[0];
            if (file.size > 52428800) {
                alert("图片大小不大于50M");
                file = null;
                return false;
            }
            var fileName = file.name;
            var postfix = fileName.substring(fileName.lastIndexOf(".") + 1).toLowerCase();
            if (postfix != "jpg" && postfix != "png") {
                alert("图片仅支持png、jpg类型的文件");
                fileName = "";
                file = null;
                return false;
            }


            var fileUrl = $(this).val();
            $(this).parent().children(".sp-upload-photo").attr("data-url", fileUrl);
            var getimg = $(this).parent().children(".sp-upload-photo");
            var filereader = new FileReader();
            filereader.readAsDataURL(file);
            $(filereader).load(function () {
                getimg.attr("src", this.result);
            });
        });
					</script>

 </body>
</html>
